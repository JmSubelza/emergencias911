{% extends 'base/base.html' %}
{% block content %}
    <script type="text/javascript">
        function mostrarMapa() {
            var map = new google.maps.Map(document.getElementById('maps'), {
                center: {lat: -17.783308, lng: -63.182118},
                zoom: 12
            });
            {% if object_list %}
                {% for mapa_incidente in object_list %}
                    var marker_{{ mapa_incidente.id }} = new google.maps.Marker({
                        position: {lat:{{mapa_incidente.lat}}, lng:{{ mapa_incidente.log }}},
                        map: map,
                        title: '{{ mapa_incidente.descripcion }}'
                    });

                    var contenido = '<b>Descripción: </b>{{ mapa_incidente.descripcion }}<p><b>Dirección: </b>{{ mapa_incidente.direccion }}';

                    var infowindow_{{ mapa_incidente.id }} = new google.maps.InfoWindow({
                        content: contenido
                    });

                    marker_{{ mapa_incidente.id }}.addListener('click', function () {
                        infowindow_{{ mapa_incidente.id }}.open(map, marker_{{ mapa_incidente.id }});
                        map.setZoom(16);
                        map.setCenter(marker.getPosition());
                    });
                {% endfor %}
            {% else %}
                alert('No Existen Registros');
            {% endif %}
        }
    </script>
    <div id="maps" style="max-width:none!important; height:450px; border: 1px solid black"></div>
{% endblock %}
{% block extrajs %}
    <script src="http://maps.google.com/maps/api/js?sensor=false&callback=mostrarMapa" async defer></script>
{% endblock %}